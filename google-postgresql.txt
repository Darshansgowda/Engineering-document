https://severalnines.com/database-blog/backup-postgresql-using-pgdump-and-pgdumpall

https://stackoverflow.com/questions/49169094/postgres-pg-dump-version-mismatch-even-though-versions-are-the-same  //version mismatch server version and pg_dump version

https://severalnines.com/database-blog/backup-postgresql-using-pgdump-and-pgdumpall  //create database


104.197.170.61  //postgresql public ip


psql -h 104.197.170.61 -u darshan -pQwinix


psql "sslmode=disable dbname=postgres user=darshan hostaddr=104.197.170.61" //login inside postgresql


\l  or \list  //listing database

drop database example_backups;  //delete database


pg_dump -h 104.197.170.61 -U darshan -p 5432 example_backups > dbname.bak  /// command to take backup postgresql


//If you want to backup all of the databases on your system, then pg_dumpall is used

sudo pg_dumpall -U user_name > backup_file

psql -h 104.197.170.61 -U darshan -p 5432 example_backups < dbname.bak

1. 1xx informational response – the request was received, continuing process
2. 2xx successful – the request was successfully received, understood, and accepted
3. 3xx redirection – further action needs to be taken in order to complete the request
4. 4xx client error – the request contains bad syntax or cannot be fulfilled
5. 5xx server error – the server failed to fulfil an apparently valid request


./odoo-bin --addons-path=addons/,../enterprise/addons -d today --db-filter=today --xmlrpc-port=8070

createuser -s darshan
psql
\password


./odoo-bin --addons-path=addons/,../enterprise/addons --xmlrpc-port=8070 --limit-time-real 99999999999

./odoo-bin --addons-path=addons/,../enterprise/addons/,../custom/addons --xmlrpc-port=8070

./odoo-bin --addons-path=addons/,../enterprise/addons/,../custom/addons --xmlrpc-port=8070 -d lns -u all   //for icons  //lns = DB name

--limit-time-real 99999999999

###########################################################################################
1  ./odoo-bin --addons-path=addons/,../enterprise/addons --xmlrpc-port=8070
2  ./odoo-bin --addons-path=addons/,../enterprise/addons/,../custom/addons --xmlrpc-port=8070 -d testing -u all    //testing DB name   //add apps to custom-->addons-->


sudo service postgresql restart
sudo systemctl restart postgresql.service

sudo kill -9 $(sudo lsof -t -i:8070)

CREATE USER postgresql WITH PASSWORD '1234';


CREATE ROLE postgresql WITH SUPERUSER;

role need to create

create role curefit;  ////if required


\i /home/nidisha/Downloads/Odoo_SCM_Curefit_03_09.sql

\l

\q

ALTER DATABASE "Odoo_SCM_Curefit" OWNER TO darshan; //user

\dt

/d //to check the tables


create role curefit; curefit //User

\c Odoo_SCM_Curefit;  Odoo_SCM_Curefit//db name //connect to database


createdb -T template0 curefit

	sudo -u postgres psql

//List 10 largest tables in PostgreSQL database

select schemaname as table_schema,
    relname as table_name,
    pg_size_pretty(pg_total_relation_size(relid)) as total_size,
    pg_size_pretty(pg_relation_size(relid)) as data_size,
    pg_size_pretty(pg_total_relation_size(relid) - pg_relation_size(relid))
      as external_size
from pg_catalog.pg_statio_user_tables
order by pg_total_relation_size(relid) desc,
         pg_relation_size(relid) desc
limit 10;

select schemaname as table_schema,
    relname as table_name,
    pg_size_pretty(pg_total_relation_size(relid)) as total_size 
from pg_catalog.pg_statio_user_tables
order by pg_total_relation_size(relid) desc,
         pg_relation_size(relid) desc
limit 10;

The function current_database() returns the name of the current database:
 SELECT current_database();

To find the database size
SELECT pg_size_pretty( pg_database_size('dbname') );

//table size in MB.
SELECT pg_size_pretty (pg_relation_size('actor'));

///login curefit postgresql database

psql -h curefit-stage-odoo-master.stage.cure.fit.internal -Ucurefit -dpostgres  -W

psql  testingdev postgres

ssh -i odoo.pem ubuntu@odoo-stage.curefit.co

[program:odoo-server]
user=ubuntu
command=/odoo/odoo-server/odoo-bin --addons-path=addons/,../enterprise/addons/,../custom/addons -d testingdev -u odoov13_44 --db_host=curefit-stage-odoo-master.stage.cure.fit.internal --db_port=5432 -r curefit  -w xWb8pkewtSckswUFttg8  --xmlrpc-port=8080 --limit-time-real 999999999999999999999999999999999999999999
directory=/odoo/odoo-server
autostart=true
autorestart=true
stderr_logfile=/var/log/odoo.err.log
stdout_logfile=/var/log/odoo.out.log
startretries=3
stopsignal=KILL
killasgroup=true

qty = -(product_qty) where transaction_types in ('t_shipment','in') and product_qty > 0


zip -r livemodules.zip /odoo/custom/addons/    ///to zip the directory
scp -i /home/darshan/Music/odoo.pem ubuntu@odoo-stage.curefit.co:~/*livemodules.zip /home/darshan/Downloads/   //to download the zip file to local machine

scp cool_stuff.txt sanjeev@example.com:/this/path/right/here


The function current_database() returns the name of the current database:
 SELECT current_database();

To find the database size
 SELECT pg_size_pretty( pg_database_size('dbname') );
